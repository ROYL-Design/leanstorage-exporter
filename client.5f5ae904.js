webpackJsonp([1],{128:function(t,e,s){s(129),t.exports=s(135)},129:function(t,e,s){window.Promise||(window.Promise=s(130)),Object.assign=s(134)},135:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(136),n=s(137),o=(s.n(n),s(138)),i=(s.n(o),s(139)),l=(s.n(i),s(140)),c=s(141);a.a.use(l.a),new a.a({el:"#app",render:function(t){return t("router-view")},router:new l.a({routes:c.a,mode:"history",scrollBehavior:function(){return{x:0,y:0}}})})},139:function(t,e){},141:function(t,e,s){"use strict";var a=s(142),n=s(164),o=[{path:"/",component:n.a},{path:"/login",component:a.a}];e.a=o},142:function(t,e,s){"use strict";function a(t){s(143)}var n=s(144),o=s(163),i=s(5),l=a,c=i(n.a,o.a,l,null,null);e.a=c.exports},143:function(t,e){},144:function(t,e,s){"use strict";var a=s(6),n=s.n(a);e.a={data:function(){return{appId:window.localStorage.getItem("lse_app_id")||"",appKey:window.localStorage.getItem("lse_app_key")||""}},methods:{connect:function(){var t=this;n.a.get("https://api.leancloud.cn/1.1/stats/appinfo",{headers:{"X-LC-Id":this.appId,"X-LC-Key":this.appKey+",master"}}).then(function(e){window.localStorage.setItem("lse_app_id",t.appId),window.localStorage.setItem("lse_app_key",t.appKey),t.$router.push("/")}).catch(function(t){window.alert(t)})}}}},163:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"box"},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("App ID")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.appId,expression:"appId"}],staticClass:"input",attrs:{placeholder:"App ID"},domProps:{value:t.appId},on:{input:function(e){e.target.composing||(t.appId=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Master Key")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.appKey,expression:"appKey"}],staticClass:"input",attrs:{placeholder:"Master Key"},domProps:{value:t.appKey},on:{input:function(e){e.target.composing||(t.appKey=e.target.value)}}})]),s("div",{staticClass:"button is-info",on:{click:t.connect}},[t._v("Connect")])])])},n=[],o={render:a,staticRenderFns:n};e.a=o},164:function(t,e,s){"use strict";function a(t){s(165)}var n=s(166),o=s(169),i=s(5),l=a,c=i(n.a,o.a,l,"data-v-111f32df",null);e.a=c.exports},165:function(t,e){},166:function(t,e,s){"use strict";var a=s(6),n=s.n(a),o=s(167),i=s.n(o),l=s(0),c=s.n(l),r=[{name:"equals",operator:"="},{name:"does not equal",operator:"!="}],u={};e.a={data:function(){return{classes:{},selectedClass:"",conditions:[{col:"",operator:"=",value:""}],operations:r,loading:!1,results:[],options:{showObjectId:!1}}},computed:{columns:function(){if(!this.selectedClass)return[];var t=Object.keys(this.classes[this.selectedClass]);return this.options.showObjectId||(t=t.filter(function(t){return"objectId"!==t})),t.sort(function(t,e){return"objectId"===t?-1:"objectId"===e?1:"createdAt"===t||"updatedAt"===t?1:"createdAt"===e||"updatedAt"===e?-1:0}),t}},watch:{selectedClass:function(t){this.conditions=[{col:"",operator:"=",value:""}],t&&this.search()}},methods:{getSchema:function(){var t=this;return u.get("/schemas").then(function(e){t.classes=i.a.pickBy(e.data,function(t,e){return e.indexOf("_")})})},addCondition:function(){this.conditions.push({col:"",operator:"=",value:""})},search:function(){var t=this;if(!this.loading){if(!this.selectedClass)return window.alert("Please select a LeanStorage Class");var e="select * from "+this.selectedClass,s=this.conditions.filter(function(t){return t.col});s.length&&(s=s.map(function(t){return t.col+" "+t.operator+" '"+t.value+"'"}),e+=" where "+s.join(" and ")),this.loading=!0,u.get("/cloudQuery",{params:{cql:e}}).then(function(e){t.results=e.data.results}).catch(function(t){window.alert(t)}).then(function(){t.loading=!1})}},display:function(t,e){return"Date"===e?c()(t).format("YYYY-MM-DD HH:mm:ss"):"GeoPoint"===e?t.longitude+","+t.latitude:t},disconnect:function(){this.$router.push("/login")}},mounted:function(){this.getSchema()},beforeRouteEnter:function(t,e,s){var a=window.localStorage.getItem("lse_app_id"),o=window.localStorage.getItem("lse_app_key");if(!a||!o)return s("/login");u=n.a.create({baseURL:"https://api.leancloud.cn/1.1",headers:{"X-LC-Id":a,"X-LC-Key":o+",master"}}),s()}}},169:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"query box"},[s("div",{staticClass:"field"},[s("div",{staticClass:"label"},[t._v("LeanStorage Class")]),s("div",{staticClass:"select mgb-10"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedClass,expression:"selectedClass"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedClass=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[t._v("Select a Class")]),t._l(t.classes,function(e,a){return s("option",[t._v(t._s(a))])})],2)])]),t.conditions.length?s("div",{staticClass:"field"},[s("div",{staticClass:"label"},[t._v("Conditions")]),t._l(t.conditions,function(e,a){return s("div",{staticClass:"condition"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.col,expression:"condition.col"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});e.col=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[t._v("Select a Column")]),t._l(t.columns,function(e){return s("option",[t._v(t._s(e))])})],2)]),s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.operator,expression:"condition.operator"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});e.operator=t.target.multiple?s:s[0]}}},t._l(t.operations,function(e){return s("option",{domProps:{value:e.operator}},[t._v(t._s(e.name))])}))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"condition.value"}],staticClass:"input",attrs:{placeholder:"Value"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),s("div",{staticClass:"delete is-medium",on:{click:function(e){t.conditions.splice(a,1)}}})])})],2):t._e(),s("div",{staticClass:"field"},[s("div",{staticClass:"label"},[t._v("Options")]),s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.options.showObjectId,expression:"options.showObjectId"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.options.showObjectId)?t._i(t.options.showObjectId,null)>-1:t.options.showObjectId},on:{__c:function(e){var s=t.options.showObjectId,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&(t.options.showObjectId=s.concat(null)):o>-1&&(t.options.showObjectId=s.slice(0,o).concat(s.slice(o+1)))}else t.options.showObjectId=n}}}),t._v(" Show objectId")])]),s("div",{staticClass:"toolbar"},[s("div",{staticClass:"button is-primary mgr-10",class:{"is-loading":t.loading},attrs:{disabled:!t.selectedClass},on:{click:t.search}},[t._v("Search")]),s("div",{staticClass:"button is-info",on:{click:t.addCondition}},[t._v("Add a condition")]),s("div",{staticClass:"button is-warning is-pulled-right",on:{click:t.disconnect}},[t._v("Disconnect")])])]),s("div",{staticClass:"results box"},[t.results.length?s("table",{staticClass:"table"},[s("thead",[s("tr",t._l(t.columns,function(e){return s("th",[t._v(t._s(e))])}))]),s("tbody",t._l(t.results,function(e){return s("tr",t._l(t.columns,function(a){return s("td",[t._v(t._s(t.display(e[a],t.classes[t.selectedClass][a].type)))])}))}))]):s("div",{staticClass:"message"},[s("div",{staticClass:"message-body"},[t._v("No Data")])])])])},n=[],o={render:a,staticRenderFns:n};e.a=o}},[128]);
//# sourceMappingURL=client.5f5ae904.js.map