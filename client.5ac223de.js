webpackJsonp([1],{131:function(t,e,n){"use strict";function a(t){if(!t.selectedClass)return[];var e=Object.keys(t.classes[t.selectedClass]);return e.sort(function(t,e){return"objectId"===t?-1:"objectId"===e?1:"createdAt"===t||"updatedAt"===t?1:"createdAt"===e||"updatedAt"===e?-1:0}),e}var s=n(8),i=n(6),o=n(9),l=n.n(o),r=n(176),c=n(5);s.a.use(i.a);var u={},d=new i.a.Store({state:{classes:{},selectedClass:"",loading:!1,results:[],conditions:[{col:"",id:"equal",value:""}]},getters:{columns:a,queryColumns:function(t){if(!t.selectedClass)return[];var e=Object.keys(c.a.types);return a(t).filter(function(n){return e.includes(t.classes[t.selectedClass][n].type)})}},mutations:{addNewCondition:function(t){t.conditions.push({col:"",id:"equal",value:""})},updateCondition:function(t,e){var n=e.index;delete e.index,Object.assign(t.conditions[n],e)},removeCondition:function(t,e){t.conditions.splice(e,1)},resetCondition:function(t){t.conditions=[{col:"",id:"equal",value:""}]},selectClass:function(t,e){t.selectedClass=e},initKeys:function(t,e){var n=e.appId,a=e.appKey;u=l.a.create({baseURL:"https://api.leancloud.cn/1.1",headers:{"X-LC-Id":n,"X-LC-Key":a+",master"}})}},actions:{getClasses:function(t){return u.get("/schemas").then(function(e){t.state.classes=_.pickBy(e.data,function(t,e){return e.indexOf("_")})})},search:function(t){var e=r.a.generate(t.state.selectedClass,t.state.conditions);return t.state.loading=!0,u.get("/cloudQuery",{params:{cql:e}}).then(function(e){t.state.results=e.data.results,t.state.loading=!1}).catch(function(e){throw t.state.loading=!1,e})}}});e.a=d},132:function(t,e,n){n(133),t.exports=n(139)},133:function(t,e,n){window.Promise||(window.Promise=n(134)),Object.assign=n(138)},139:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(8),s=n(140),i=(n.n(s),n(141)),o=(n.n(i),n(142)),l=n(143),r=n(131);a.a.use(o.a),new a.a({el:"#app",render:function(t){return t("router-view")},store:r.a,router:new o.a({routes:l.a,scrollBehavior:function(){return{x:0,y:0}}})})},141:function(t,e){},143:function(t,e,n){"use strict";var a=n(144),s=n(166),i=[{path:"/",component:s.a},{path:"/connect",component:a.a}];e.a=i},144:function(t,e,n){"use strict";function a(t){n(145)}var s=n(146),i=n(165),o=n(3),l=a,r=o(s.a,i.a,l,null,null);e.a=r.exports},145:function(t,e){},146:function(t,e,n){"use strict";var a=n(9),s=n.n(a);e.a={data:function(){return{loading:!1,appId:window.localStorage.getItem("lse_app_id")||"",appKey:window.localStorage.getItem("lse_app_key")||""}},methods:{connect:function(){var t=this;this.loading||(this.loading=!0,s.a.get("https://api.leancloud.cn/1.1/stats/appinfo",{headers:{"X-LC-Id":this.appId,"X-LC-Key":this.appKey+",master"}}).then(function(e){window.localStorage.setItem("lse_app_id",t.appId),window.localStorage.setItem("lse_app_key",t.appKey),t.$router.push("/")}).catch(function(t){window.alert(t)}).then(function(){t.loading=!1}))}}}},165:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"box"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("App ID")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.appId,expression:"appId"}],staticClass:"input",attrs:{placeholder:"App ID"},domProps:{value:t.appId},on:{input:function(e){e.target.composing||(t.appId=e.target.value)}}})]),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Master Key")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.appKey,expression:"appKey"}],staticClass:"input",attrs:{placeholder:"Master Key"},domProps:{value:t.appKey},on:{input:function(e){e.target.composing||(t.appKey=e.target.value)}}})]),n("div",{staticClass:"button is-info",class:{"is-loading":t.loading},on:{click:t.connect}},[t._v("Connect")])])])},s=[],i={render:a,staticRenderFns:s};e.a=i},166:function(t,e,n){"use strict";function a(t){n(167)}var s=n(168),i=n(177),o=n(3),l=a,r=o(s.a,i.a,l,"data-v-111f32df",null);e.a=r.exports},167:function(t,e){},168:function(t,e,n){"use strict";var a=n(169),s=(n.n(a),n(170)),i=n(172),o=n(131),l=n(6);e.a={data:function(){return{options:{showObjectId:!1}}},computed:Object.assign({},Object(l.c)(["classes","conditions","loading","results"]),Object(l.b)(["queryColumns"]),{columns:function(){var t=this.$store.getters.columns;return this.options.showObjectId||(t=t.filter(function(t){return"objectId"!==t})),t},selectedClass:{get:function(){return this.$store.state.selectedClass},set:function(t){this.$store.commit("selectClass",t)}}}),watch:{selectedClass:function(t){this.$store.commit("resetCondition"),t&&this.search()}},methods:{addCondition:function(){this.$store.commit("addNewCondition")},search:function(){if(!this.loading)return this.selectedClass?void this.$store.dispatch("search").catch(function(t){window.alert(t)}):window.alert("Please select a LeanStorage Class")},display:s.a,disconnect:function(){this.$router.push("/connect")}},mounted:function(){this.$store.dispatch("getClasses")},beforeRouteEnter:function(t,e,n){var a=window.localStorage.getItem("lse_app_id"),s=window.localStorage.getItem("lse_app_key");if(!a||!s)return n("/connect");o.a.commit("initKeys",{appId:a,appKey:s}),n()},components:{Condition:i.a}}},170:function(t,e,n){"use strict";var a=n(0),s=n.n(a);e.a=function(t,e){return"Date"===e?s()(t).format("YYYY-MM-DD HH:mm:ss"):"GeoPoint"===e?t.longitude+","+t.latitude:t}},172:function(t,e,n){"use strict";function a(t){n(173)}var s=n(174),i=n(175),o=n(3),l=a,r=o(s.a,i.a,l,"data-v-09b853e5",null);e.a=r.exports},173:function(t,e){},174:function(t,e,n){"use strict";var a=n(5),s=n(6);e.a={data:function(){return{operators:a.a}},computed:Object.assign({col:{get:function(){return this.$store.state.conditions[this.index].col},set:function(t){this.updateCondition({col:t})}},id:{get:function(){return this.$store.state.conditions[this.index].id},set:function(t){this.updateCondition({id:t})}},value:{get:function(){return this.$store.state.conditions[this.index].value},set:function(t){this.updateCondition({value:t})}},type:function(){return this.selectedClass&&this.col?this.classes[this.selectedClass][this.col].type:null},valueType:function(){return this.id?a.a[this.id].valueType:null}},Object(s.c)(["classes","selectedClass"]),Object(s.b)(["queryColumns"])),methods:{removeCondition:function(){this.$store.commit("removeCondition",this.index)},updateCondition:function(t){this.$store.commit("updateCondition",Object.assign({index:this.index},t))}},props:["index"]}},175:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"condition"},[n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.col,expression:"col"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.col=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[t._v("Select a Column")]),t._l(t.queryColumns,function(e){return n("option",[t._v(t._s(e))])})],2)]),t.selectedClass&&t.col?n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.id=e.target.multiple?n:n[0]}}},t._l(t.operators.types[t.type],function(e){return n("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))]):t._e(),"text"===t.valueType?n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"input",attrs:{placeholder:"Value"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}):t._e(),"number"===t.valueType?n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.value,expression:"value",modifiers:{number:!0}}],staticClass:"input",attrs:{placeholder:"Value",type:"number"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}):t._e(),"date"===t.valueType?n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"input",attrs:{placeholder:"Value",type:"datetime-local"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}):t._e(),n("div",{staticClass:"delete is-medium",on:{click:t.removeCondition}})])},s=[],i={render:a,staticRenderFns:s};e.a=i},176:function(t,e,n){"use strict";function a(t,e){var n="select * from "+t;return e=e.filter(function(t){return t.col}),e.length&&(e=e.map(function(t){return t.col+" "+s.a[t.id].template(t.value)}),n+=" where "+e.join(" and ")),n}var s=n(5);e.a={generate:a}},177:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"query box"},[n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[t._v("LeanStorage Class")]),n("div",{staticClass:"select mgb-10"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedClass,expression:"selectedClass"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedClass=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[t._v("Select a Class")]),t._l(t.classes,function(e,a){return n("option",[t._v(t._s(a))])})],2)])]),t.conditions.length?n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[t._v("Conditions")]),t._l(t.conditions,function(t,e){return n("Condition",{key:e,attrs:{index:e}})})],2):t._e(),n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[t._v("Options")]),n("label",{staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.options.showObjectId,expression:"options.showObjectId"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.options.showObjectId)?t._i(t.options.showObjectId,null)>-1:t.options.showObjectId},on:{__c:function(e){var n=t.options.showObjectId,a=e.target,s=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&(t.options.showObjectId=n.concat(null)):i>-1&&(t.options.showObjectId=n.slice(0,i).concat(n.slice(i+1)))}else t.options.showObjectId=s}}}),t._v(" Show objectId")])]),n("div",{staticClass:"toolbar"},[n("div",{staticClass:"button is-primary mgr-10",class:{"is-loading":t.loading},attrs:{disabled:!t.selectedClass},on:{click:t.search}},[t._v("Search")]),n("div",{staticClass:"button is-info",on:{click:t.addCondition}},[t._v("Add a condition")]),n("div",{staticClass:"button is-warning is-pulled-right",on:{click:t.disconnect}},[t._v("Disconnect")])])]),n("div",{staticClass:"results box"},[t.results.length?n("table",{staticClass:"table"},[n("thead",[n("tr",t._l(t.columns,function(e){return n("th",[t._v(t._s(e))])}))]),n("tbody",t._l(t.results,function(e){return n("tr",t._l(t.columns,function(a){return n("td",[t._v(t._s(t.display(e[a],t.classes[t.selectedClass][a].type)))])}))}))]):n("div",{staticClass:"message"},[n("div",{staticClass:"message-body"},[t._v("No Data")])])])])},s=[],i={render:a,staticRenderFns:s};e.a=i},5:function(t,e,n){"use strict";var a=n(0),s=n.n(a),i={id:"equal",name:"=",template:function(t){return"= '"+t+"'"},valueType:"text"},o={id:"notEqual",name:"!=",template:function(t){return"!= '"+t+"'"},valueType:"text"},l={id:"lessThan",name:"<",template:function(t){return"< '"+t+"'"},valueType:"number"},r={id:"greaterThan",name:">",template:function(t){return"> '"+t+"'"},valueType:"number"},c={id:"lessThanOrEqual",name:"<=",template:function(t){return"<= '"+t+"'"},valueType:"number"},u={id:"greaterThanOrEqual",name:">=",template:function(t){return">= '"+t+"'"},valueType:"number"},d={id:"before",name:"before",template:function(t){return"< date('"+s()(t).toISOString()+"')"},valueType:"date"},p={id:"after",name:"after",template:function(t){return"> date('"+s()(t).toISOString()+"')"},valueType:"date"},v={id:"contains",name:"contains string",template:function(t){return"= '"+t+"'"},valueType:"text"},m={id:"notContains",name:"not contains string",template:function(t){return"!= '"+t+"'"},valueType:"text"},f={id:"containsNumber",name:"contains number",template:function(t){return"= "+t},valueType:"number"},h={id:"notContainsNumber",name:"not contains number",template:function(t){return"!= "+t},valueType:"number"},C={id:"exists",name:"exists",template:function(t){return"is exists"},valueType:null},g={id:"notExists",name:"not exists",template:function(t){return"is not exists"},valueType:null};e.a={equal:i,notEqual:o,lessThan:l,greaterThan:r,lessThanOrEqual:c,greaterThanOrEqual:u,before:d,after:p,contains:v,notContains:m,containsNumber:f,notContainsNumber:h,exists:C,notExists:g,types:{String:[i,o,C,g],Number:[i,o,l,r,c,u,C,g],Boolean:[i,C,g],Date:[d,p,C,g],Array:[v,m,f,h,C,g],Object:[C,g]}}}},[132]);