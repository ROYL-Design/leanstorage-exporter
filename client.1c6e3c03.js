webpackJsonp([1],{131:function(e,t,n){"use strict";function a(e){if(!e.selectedClass)return[];var t=Object.keys(e.classes[e.selectedClass]);return t.sort(function(e,t){return"objectId"===e?-1:"objectId"===t?1:"createdAt"===e||"updatedAt"===e?1:"createdAt"===t||"updatedAt"===t?-1:0}),t}var s=n(8),i=n(6),o=n(9),l=n.n(o),r=n(176),c=n(3);s.a.use(i.a);var u={},d=new i.a.Store({state:{classes:{},selectedClass:"",loading:!1,results:[],conditions:[{col:"",id:"equal",value:""}]},getters:{columns:a,queryColumns:function(e){if(!e.selectedClass)return[];var t=Object.keys(c.a.types);return a(e).filter(function(n){return t.includes(e.classes[e.selectedClass][n].type)})}},mutations:{addNewCondition:function(e){e.conditions.push({col:"",id:"equal",value:""})},updateCondition:function(e,t){var n=t.index;delete t.index,Object.assign(e.conditions[n],t)},removeCondition:function(e,t){e.conditions.splice(t,1)},resetCondition:function(e){e.conditions=[{col:"",id:"equal",value:""}]},selectClass:function(e,t){e.selectedClass=t},initKeys:function(e,t){var n=t.appId,a=t.appKey;u=l.a.create({baseURL:"https://api.leancloud.cn/1.1",headers:{"X-LC-Id":n,"X-LC-Key":a+",master"}})}},actions:{getClasses:function(e){return u.get("/schemas").then(function(t){e.state.classes=_.pickBy(t.data,function(e,t){return t.indexOf("_")})})},search:function(e){var t=r.a.generate(e.state.selectedClass,e.state.conditions);return e.state.loading=!0,u.get("/cloudQuery",{params:{cql:t}}).then(function(t){e.state.results=t.data.results,e.state.loading=!1}).catch(function(t){throw e.state.loading=!1,t})}}});t.a=d},132:function(e,t,n){n(133),e.exports=n(139)},133:function(e,t,n){window.Promise||(window.Promise=n(134)),Object.assign=n(138)},139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),s=n(140),i=(n.n(s),n(141)),o=(n.n(i),n(142)),l=n(143),r=n(131);a.a.use(o.a),new a.a({el:"#app",render:function(e){return e("router-view")},store:r.a,router:new o.a({routes:l.a,scrollBehavior:function(){return{x:0,y:0}}})})},141:function(e,t){},143:function(e,t,n){"use strict";var a=n(144),s=n(166),i=[{path:"/",component:s.a},{path:"/connect",component:a.a}];t.a=i},144:function(e,t,n){"use strict";function a(e){n(145)}var s=n(146),i=n(165),o=n(4),l=a,r=o(s.a,i.a,l,null,null);t.a=r.exports},145:function(e,t){},146:function(e,t,n){"use strict";var a=n(9),s=n.n(a);t.a={data:function(){return{loading:!1,appId:window.localStorage.getItem("lse_app_id")||"",appKey:window.localStorage.getItem("lse_app_key")||""}},methods:{connect:function(){var e=this;this.loading||(this.loading=!0,s.a.get("https://api.leancloud.cn/1.1/stats/appinfo",{headers:{"X-LC-Id":this.appId,"X-LC-Key":this.appKey+",master"}}).then(function(t){window.localStorage.setItem("lse_app_id",e.appId),window.localStorage.setItem("lse_app_key",e.appKey),e.$router.push("/")}).catch(function(e){window.alert(e)}).then(function(){e.loading=!1}))}}}},165:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"box"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("App ID")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.appId,expression:"appId"}],staticClass:"input",attrs:{placeholder:"App ID"},domProps:{value:e.appId},on:{input:function(t){t.target.composing||(e.appId=t.target.value)}}})]),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("Master Key")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.appKey,expression:"appKey"}],staticClass:"input",attrs:{placeholder:"Master Key"},domProps:{value:e.appKey},on:{input:function(t){t.target.composing||(e.appKey=t.target.value)}}})]),n("div",{staticClass:"button is-info",class:{"is-loading":e.loading},on:{click:e.connect}},[e._v("Connect")])])])},s=[],i={render:a,staticRenderFns:s};t.a=i},166:function(e,t,n){"use strict";function a(e){n(167)}var s=n(168),i=n(177),o=n(4),l=a,r=o(s.a,i.a,l,"data-v-111f32df",null);t.a=r.exports},167:function(e,t){},168:function(e,t,n){"use strict";var a=n(169),s=(n.n(a),n(170)),i=n(3),o=n(172),l=n(131),r=n(6);t.a={data:function(){return{operators:i.a,options:{showObjectId:!1}}},computed:Object.assign({},Object(r.c)(["classes","conditions","loading","results"]),Object(r.b)(["columns","queryColumns"]),{selectedClass:{get:function(){return this.$store.state.selectedClass},set:function(e){this.$store.commit("selectClass",e)}}}),watch:{selectedClass:function(e){this.$store.commit("resetCondition"),e&&this.search()}},methods:{addCondition:function(){this.$store.commit("addNewCondition")},search:function(){if(!this.loading)return this.selectedClass?void this.$store.dispatch("search").catch(function(e){window.alert(e)}):window.alert("Please select a LeanStorage Class")},display:s.a,disconnect:function(){this.$router.push("/connect")}},mounted:function(){this.$store.dispatch("getClasses")},beforeRouteEnter:function(e,t,n){var a=window.localStorage.getItem("lse_app_id"),s=window.localStorage.getItem("lse_app_key");if(!a||!s)return n("/connect");l.a.commit("initKeys",{appId:a,appKey:s}),n()},components:{Condition:o.a}}},170:function(e,t,n){"use strict";var a=n(0),s=n.n(a);t.a=function(e,t){return"Date"===t?s()(e).format("YYYY-MM-DD HH:mm:ss"):"GeoPoint"===t?e.longitude+","+e.latitude:e}},172:function(e,t,n){"use strict";function a(e){n(173)}var s=n(174),i=n(175),o=n(4),l=a,r=o(s.a,i.a,l,"data-v-09b853e5",null);t.a=r.exports},173:function(e,t){},174:function(e,t,n){"use strict";var a=n(3),s=n(6);t.a={data:function(){return{operators:a.a}},computed:Object.assign({col:{get:function(){return this.$store.state.conditions[this.index].col},set:function(e){this.updateCondition({col:e})}},id:{get:function(){return this.$store.state.conditions[this.index].id},set:function(e){this.updateCondition({id:e})}},value:{get:function(){return this.$store.state.conditions[this.index].value},set:function(e){this.updateCondition({value:e})}},type:function(){return this.selectedClass&&this.col?this.classes[this.selectedClass][this.col].type:null},valueType:function(){return this.id?a.a[this.id].valueType:null}},Object(s.c)(["classes","selectedClass"]),Object(s.b)(["queryColumns"])),methods:{removeCondition:function(){this.$store.commit("removeCondition",this.index)},updateCondition:function(e){this.$store.commit("updateCondition",Object.assign({index:this.index},e))}},props:["index"]}},175:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"condition"},[n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.col,expression:"col"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.col=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("Select a Column")]),e._l(e.queryColumns,function(t){return n("option",[e._v(e._s(t))])})],2)]),e.selectedClass&&e.col?n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.id,expression:"id"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.id=t.target.multiple?n:n[0]}}},e._l(e.operators.types[e.type],function(t){return n("option",{domProps:{value:t.id}},[e._v(e._s(t.name))])}))]):e._e(),"text"===e.valueType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"input",attrs:{placeholder:"Value"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):e._e(),"number"===e.valueType?n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.value,expression:"value",modifiers:{number:!0}}],staticClass:"input",attrs:{placeholder:"Value",type:"number"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}):e._e(),"date"===e.valueType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"input",attrs:{placeholder:"Value",type:"datetime-local"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):e._e(),n("div",{staticClass:"delete is-medium",on:{click:e.removeCondition}})])},s=[],i={render:a,staticRenderFns:s};t.a=i},176:function(e,t,n){"use strict";function a(e,t){var n="select * from "+e;return t=t.filter(function(e){return e.col}),t.length&&(t=t.map(function(e){return e.col+" "+s.a[e.id].template(e.value)}),n+=" where "+t.join(" and ")),n}var s=n(3);t.a={generate:a}},177:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"query box"},[n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("LeanStorage Class")]),n("div",{staticClass:"select mgb-10"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedClass,expression:"selectedClass"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedClass=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("Select a Class")]),e._l(e.classes,function(t,a){return n("option",[e._v(e._s(a))])})],2)])]),e.conditions.length?n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("Conditions")]),e._l(e.conditions,function(e,t){return n("Condition",{key:t,attrs:{index:t}})})],2):e._e(),n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("Options")]),n("label",{staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.options.showObjectId,expression:"options.showObjectId"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.options.showObjectId)?e._i(e.options.showObjectId,null)>-1:e.options.showObjectId},on:{__c:function(t){var n=e.options.showObjectId,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=e._i(n,null);a.checked?i<0&&(e.options.showObjectId=n.concat(null)):i>-1&&(e.options.showObjectId=n.slice(0,i).concat(n.slice(i+1)))}else e.options.showObjectId=s}}}),e._v(" Show objectId")])]),n("div",{staticClass:"toolbar"},[n("div",{staticClass:"button is-primary mgr-10",class:{"is-loading":e.loading},attrs:{disabled:!e.selectedClass},on:{click:e.search}},[e._v("Search")]),n("div",{staticClass:"button is-info",on:{click:e.addCondition}},[e._v("Add a condition")]),n("div",{staticClass:"button is-warning is-pulled-right",on:{click:e.disconnect}},[e._v("Disconnect")])])]),n("div",{staticClass:"results box"},[e.results.length?n("table",{staticClass:"table"},[n("thead",[n("tr",e._l(e.columns,function(t){return n("th",[e._v(e._s(t))])}))]),n("tbody",e._l(e.results,function(t){return n("tr",e._l(e.columns,function(a){return n("td",[e._v(e._s(e.display(t[a],e.classes[e.selectedClass][a].type)))])}))}))]):n("div",{staticClass:"message"},[n("div",{staticClass:"message-body"},[e._v("No Data")])])])])},s=[],i={render:a,staticRenderFns:s};t.a=i},3:function(e,t,n){"use strict";var a=n(0),s=n.n(a),i={id:"equal",name:"=",template:function(e){return"= '"+e+"'"},valueType:"text"},o={id:"notEqual",name:"!=",template:function(e){return"!= '"+e+"'"},valueType:"text"},l={id:"lessThan",name:"<",template:function(e){return"< '"+e+"'"},valueType:"number"},r={id:"greaterThan",name:">",template:function(e){return"> '"+e+"'"},valueType:"number"},c={id:"lessThanOrEqual",name:"<=",template:function(e){return"<= '"+e+"'"},valueType:"number"},u={id:"greaterThanOrEqual",name:">=",template:function(e){return">= '"+e+"'"},valueType:"number"},d={id:"before",name:"before",template:function(e){return"< date('"+s()(e).toISOString()+"')"},valueType:"date"},p={id:"after",name:"after",template:function(e){return"> date('"+s()(e).toISOString()+"')"},valueType:"date"},v={id:"contains",name:"contains string",template:function(e){return"= '"+e+"'"},valueType:"text"},m={id:"notContains",name:"not contains string",template:function(e){return"!= '"+e+"'"},valueType:"text"},f={id:"containsNumber",name:"contains number",template:function(e){return"= "+e},valueType:"number"},h={id:"notContainsNumber",name:"not contains number",template:function(e){return"!= "+e},valueType:"number"},C={id:"exists",name:"exists",template:function(e){return"is exists"},valueType:null},g={id:"notExists",name:"not exists",template:function(e){return"is not exists"},valueType:null};t.a={equal:i,notEqual:o,lessThan:l,greaterThan:r,lessThanOrEqual:c,greaterThanOrEqual:u,before:d,after:p,contains:v,notContains:m,containsNumber:f,notContainsNumber:h,exists:C,notExists:g,types:{String:[i,o,C,g],Number:[i,o,l,r,c,u,C,g],Boolean:[i,C,g],Date:[d,p,C,g],Array:[v,m,f,h,C,g],Object:[C,g]}}}},[132]);
//# sourceMappingURL=client.1c6e3c03.js.map